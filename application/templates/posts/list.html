{% extends "layout.html" %}

{% block body %}
  <table>
    <tr>
      <th></th>
      <th>Upvotes</th>
      <th>Title</th>
      <th>Author</th>
      <th>Content</th>
    </tr>
    {% for post in posts %}
    <tr>
      <td>
        <form method="POST" action="{{ url_for('posts_upvote', post_id=post.id) }}">
          <input type="submit" value="upvote"/>
        </form>
      </td>
      <td>{{ post.upvotes }}</td>
      <td>{{ post.title }}</td>
      <td>{{ post.author.username }}</td>
      <td>
        {% if post.is_text %}
          {{ post.content }}
        {% else %}
          <a href={{ post.content }}>{{ post.content }}</a>
        {% endif %}
      </td>
      <td>
        {% if post.author == current_user %}
          <form action="{{ url_for('posts_edit', post_id=post.id) }}">
            <input type="submit" value="edit"/>
          </form>
        {% endif %}
      </td>
      <td>
        {% if post.author == current_user %}
          <form method="POST" action="{{ url_for('posts_delete', post_id=post.id) }}">
            <input type="submit" value="delete"/>
          </form>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </table>
{% endblock %}